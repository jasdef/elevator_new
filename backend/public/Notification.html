<!DOCTYPE html>
<html lang="en">

<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <!-- Meta, title, CSS, favicons, etc. -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>利通電梯</title>

        <link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
     

        <link href="../assets/styles.css" rel="stylesheet" media="screen">

        <!-- Bootstrap -->
        <link href="../vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
        <!-- Font Awesome -->
        <link href="../vendors/font-awesome/css/font-awesome.css" rel="stylesheet">
        <!-- NProgress -->
        <link href="../vendors/nprogress/nprogress.css" rel="stylesheet">
        <!-- Datatables -->
        <link href="../vendors/datatables.net-bs/css/dataTables.bootstrap.min.css" rel="stylesheet">
        <link href="../vendors/datatables.net-buttons-bs/css/buttons.bootstrap.min.css" rel="stylesheet">
        <link href="../vendors/datatables.net-fixedheader-bs/css/fixedHeader.bootstrap.min.css" rel="stylesheet">
        <link href="../vendors/datatables.net-responsive-bs/css/responsive.bootstrap.min.css" rel="stylesheet">
        <link href="../vendors/datatables.net-scroller-bs/css/scroller.bootstrap.min.css" rel="stylesheet">
        <!-- Custom Theme Style -->
        <link href="../build/css/custom.min.css" rel="stylesheet">
        <!-- bootstrap-daterangepicker -->
        <link href="../vendors/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet">
        <!-- bootstrap-select -->
        <link rel="stylesheet" href="../vendors/bootstrap-select/css/bootstrap-select.min.css">
        <link href="../vendors/bootstrap-notify/animate.min.css" rel="stylesheet">
</head>
    <body class="nav-md">

        <div class="container body">
            <div class="main_container">
                <!--Menu-->
                <!--Top-->
                <!-- page content -->
                <div class="right_col" role="main">
 <div class="row-fluid">
                        <div class="span6">
                            <!-- block -->
                            <div class="block">
                                <div class="navbar navbar-inner block-header">
                                    <div class="muted pull-left">Users</div>
                                    <div class="pull-right"><span class="badge badge-info">1,234</span>

                                    </div>
                                </div>
                                <div class="block-content collapse in">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>First Name</th>
                                                <th>Last Name</th>
                                                <th>Username</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>Mark</td>
                                                <td>Otto</td>
                                                <td>@mdo</td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>Jacob</td>
                                                <td>Thornton</td>
                                                <td>@fat</td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>Vincent</td>
                                                <td>Gabriel</td>
                                                <td>@gabrielva</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!-- /block -->
                        </div>
                        <div class="span6">
                            <!-- block -->
                            <div class="block">
                                <div class="navbar navbar-inner block-header">
                                    <div class="muted pull-left">Orders</div>
                                    <div class="pull-right"><span class="badge badge-info">752</span>

                                    </div>
                                </div>
                                <div class="block-content collapse in">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>Product</th>
                                                <th>Date</th>
                                                <th>Amount</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>Coat</td>
                                                <td>02/02/2013</td>
                                                <td>$25.12</td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>Jacket</td>
                                                <td>01/02/2013</td>
                                                <td>$335.00</td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>Shoes</td>
                                                <td>01/02/2013</td>
                                                <td>$29.99</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!-- /block -->
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span6">
                            <!-- block -->
                            <div class="block">
                                <div class="navbar navbar-inner block-header">
                                    <div class="muted pull-left">Clients</div>
                                    <div class="pull-right"><span class="badge badge-info">17</span>

                                    </div>
                                </div>
                                <div class="block-content collapse in">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>First Name</th>
                                                <th>Last Name</th>
                                                <th>Username</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>Mark</td>
                                                <td>Otto</td>
                                                <td>@mdo</td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>Jacob</td>
                                                <td>Thornton</td>
                                                <td>@fat</td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>Vincent</td>
                                                <td>Gabriel</td>
                                                <td>@gabrielva</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!-- /block -->
                        </div>
                        <div class="span6">
                            <!-- block -->
                            <div class="block">
                                <div class="navbar navbar-inner block-header">
                                    <div class="muted pull-left">Invoices</div>
                                    <div class="pull-right"><span class="badge badge-info">812</span>

                                    </div>
                                </div>
                                <div class="block-content collapse in">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>Date</th>
                                                <th>Amount</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>02/02/2013</td>
                                                <td>$25.12</td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>01/02/2013</td>
                                                <td>$335.00</td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>01/02/2013</td>
                                                <td>$29.99</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!-- /block -->
                        </div>
                    </div>
                </div>
                <!-- /page content -->
                <!--footer-->
            </div>
        </div>
    </body>>
    <div id="loading-cover" style="width: 100%; height: 100%; background: rgba(0,0,0,.5); position: fixed; display: none; z-index: 999999; top: 0; left: 0;">
            <div id="loading-icon" style="width: 85px; height: 65px; margin: -42.5px 0 0 -32.5px; top: 50%; left: 50%; position: fixed;">
                <i class="fa fa-circle-o-notch fa-spin fa-5x fa-fw" style="color: #FFF;"></i>
            </div>
        </div>
        <!-- jQuery -->
        <script src="../vendors/jquery/dist/jquery.min.js"></script>
        <!-- Bootstrap -->
        <script src="../vendors/bootstrap/dist/js/bootstrap.min.js"></script>
        <!-- FastClick -->
        <script src="../vendors/fastclick/lib/fastclick.js"></script>
        <!-- NProgress -->
        <script src="../vendors/nprogress/nprogress.js"></script>
        <!-- validator -->
        <script src="../vendors/validator/validator.js"></script>
        <!-- Datatables -->
        <script src="../vendors/datatables.net/js/jquery.dataTables.min.js"></script>
        <script src="../vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
        <script src="../vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
        <script src="../vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
        <script src="../vendors/datatables.net-buttons/js/buttons.flash.min.js"></script>
        <script src="../vendors/datatables.net-buttons/js/buttons.html5.min.js"></script>
        <script src="../vendors/datatables.net-buttons/js/buttons.print.min.js"></script>
        <script src="../vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
        <script src="../vendors/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
        <script src="../vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
        <script src="../vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
        <script src="../vendors/datatables.net-scroller/js/dataTables.scroller.min.js"></script>
        <script src="../vendors/jszip/dist/jszip.min.js"></script>
        <script src="../vendors/pdfmake/build/pdfmake.min.js"></script>
        <script src="../vendors/pdfmake/build/vfs_fonts.js"></script>
        <script src="../vendors/moment/min/moment.min.js"></script>
        <script src="../vendors/bootstrap-daterangepicker/daterangepicker.js"></script>
        <!-- bootstrap-select -->
        <script src="../vendors/bootstrap-select/js/bootstrap-select.min.js"></script>
        <script src="../vendors/bootstrap-select/js/i18n/defaults-zh_TW.min.js"></script>
        <!-- Custom Theme Scripts -->
        <script src="../build/js/custom.min.js"></script>            
        <script>
            $(document).ready(function() {                
                var isMemberIdCheckPass = false;

                function clear() {                                
                    $('#Coin').val(0);                    
                    $('#VIPPoint').val(0);
                    $('#Account').val("");
                    $('#NT').val(0);
                    $('#DepositType').val("");
                    $('#DepositSource').val("");                    
                }

                function checkMemberId() {
                    var account = $('#Account').val();
                    $('#loading-cover').fadeIn(100);
                    if (!account.match(/^JCG[0-9]{10}$/)) {
                        $('#CheckResult').val("會員ID格式有誤!! 格式應為:(JCG+10碼數字)");
                        $('#loading-cover').fadeOut(100);
                    }
                    else {
                        $.ajax({
                            type: 'POST',
                            url: "/CheckMemberId",
                            data: { memberId: account },
                            cache: false,
                            async: true,
                            dataType: 'json',
                            success: function(msg) {

                                if (msg.code == 0) {
                                    isMemberIdCheckPass = true;  
                                }
                                $('#CheckResult').val(msg.msg);
                            }
                            }).done(function() {
                                $('#loading-cover').fadeOut(100);
                        }); 
                    }
                }
                                         
                function checkData() 
                {
                    var result = {r : false};
          
                    if ($('#Account').val() === "") {
                        alert("會員編號沒填!!");
                        return result; 
                    }
                    else if ($('#DepositSource').val() === "") {
                        alert("來源沒填!!!");
                        return result;
                    }
                    else if ($('#DepositType').val() === "") {
                        alert("項目沒填!!!");
                        return result;
                    }
                   
                    if ($('#Coin').val() < 0 ||  $('#NT').val() < 0) {
                        alert("新台幣 或 遊戲幣不能是負數");
                        return result;
                    } 
                    
                    if ($('#NT').val() == 0) {
                        if (!confirm("新台幣沒填!!!"))
                            return result;
                    }

                    if ($('#Coin').val() == 0) {
                        if (!confirm("遊戲幣沒填!!!"))
                            return result;
                    }                  

                    result.Account = $('#Account').val();
                    result.Coin = $('#Coin').val()
                    result.VIPPoint = $('#VIPPoint').val();
                    result.NT = $('#NT').val();
                    result.DepositType = $('#DepositType').val();
                    result.DepositSrouce = $('#DepositSource').val();
                    result.CreateTime = $.now();
                    result.r = true;

                    return result;
                }
  
                function snedDeposit() 
                {
                    var depositData = checkData();
                    if (isMemberIdCheckPass) {
                        if (depositData.r) {
                            if (confirm("確定要送此單?")) {
                                $.ajax({
                                type: 'POST',
                                url: "/DepositMoney",
                                data: {requestData: JSON.stringify(depositData)},
                                dataType: 'json',
                                success: function(msg) {
                                    alert(msg.msg);
                                },
                                error: function(xhr, desc, err) {
                                    alert("HTTP Status code:" + xhr.status);
                                }
                                }).done(function() {
                                    $('#loading-cover').fadeOut(100);
                                });
                            }
                        }
                    }
                    else {
                        alert("請確認會員ID否格式正確!!");
                    }                                       
                }

                function checkInputNum(event) {
                    if(event.keyCode == 45){
                        event.preventDefault();
                    }
                }

                $(document).on('click', '#mClear', clear);
                $(document).on('click', '#mSendDeposit', snedDeposit);
                $(document).on('click', '#Check', checkMemberId);
                $('#Account').change(function() {
                    isMemberIdCheckPass = false;
                });

                $(document).on('keypress', '#VIPPoint', checkInputNum);
                $(document).on('keypress', '#NT', checkInputNum);
                $(document).on('keypress', '#Coin', checkInputNum);
                
            });
        </script>
</html>>